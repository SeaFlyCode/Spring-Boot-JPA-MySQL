<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boutique de Th√©s - Formulaire Produit</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body {
            background-color: #f5f5dc;
        }
        .navbar {
            background-color: #2d5a27 !important;
        }
        .btn-primary {
            background-color: #2d5a27;
            border-color: #2d5a27;
        }
        .btn-primary:hover {
            background-color: #1e3d1a;
            border-color: #1e3d1a;
        }
        .card {
            border-color: #2d5a27;
        }
        .card-header {
            background-color: #2d5a27;
            color: white;
        }
        .required::after {
            content: " *";
            color: red;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="/">üçµ Boutique de Th√©s</a>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="card">
            <div class="card-header">
                <h2 class="mb-0" th:text="${produit.id != null} ? '‚úèÔ∏è Modifier le Produit' : '‚ûï Nouveau Produit'"></h2>
            </div>
            <div class="card-body">
                <form th:action="${produit.id != null} ? @{/modifier/{id}(id=${produit.id})} : @{/enregistrer}"
                      th:object="${produit}" method="post" novalidate>

                    <div class="row">
                        <!-- Nom -->
                        <div class="col-md-6 mb-3">
                            <label for="nom" class="form-label required">Nom du th√©</label>
                            <input type="text" class="form-control" id="nom" th:field="*{nom}"
                                   th:classappend="${#fields.hasErrors('nom')} ? 'is-invalid' : ''"
                                   maxlength="100" required>
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('nom')}" th:errors="*{nom}"></div>
                        </div>

                        <!-- Type de th√© -->
                        <div class="col-md-6 mb-3">
                            <label for="typeThe" class="form-label">Type de th√©</label>
                            <select class="form-select" id="typeThe" th:field="*{typeThe}">
                                <option value="">-- S√©lectionner un type --</option>
                                <option th:each="type : ${typesThe}" th:value="${type}" th:text="${type}"></option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Origine -->
                        <div class="col-md-6 mb-3">
                            <label for="origine" class="form-label">Origine</label>
                            <select class="form-select" id="origine" th:field="*{origine}">
                                <option value="">-- S√©lectionner une origine --</option>
                                <option th:each="orig : ${origines}" th:value="${orig}" th:text="${orig}"></option>
                            </select>
                        </div>

                        <!-- Date de r√©ception -->
                        <div class="col-md-6 mb-3">
                            <label for="dateReception" class="form-label">Date de r√©ception</label>
                            <input type="date" class="form-control" id="dateReception" th:field="*{dateReception}">
                        </div>
                    </div>

                    <div class="row">
                        <!-- Prix -->
                        <div class="col-md-6 mb-3">
                            <label for="prix" class="form-label required">Prix (‚Ç¨)</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="prix" th:field="*{prix}"
                                       th:classappend="${#fields.hasErrors('prix')} ? 'is-invalid' : ''"
                                       step="0.01" min="5" max="100" required>
                                <span class="input-group-text">‚Ç¨</span>
                                <div class="invalid-feedback" th:if="${#fields.hasErrors('prix')}" th:errors="*{prix}"></div>
                            </div>
                            <small class="text-muted">Entre 5‚Ç¨ et 100‚Ç¨</small>
                        </div>

                        <!-- Quantit√© en stock -->
                        <div class="col-md-6 mb-3">
                            <label for="quantiteStock" class="form-label required">Quantit√© en stock</label>
                            <input type="number" class="form-control" id="quantiteStock" th:field="*{quantiteStock}"
                                   th:classappend="${#fields.hasErrors('quantiteStock')} ? 'is-invalid' : ''"
                                   min="0" required>
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('quantiteStock')}" th:errors="*{quantiteStock}"></div>
                            <small class="text-muted">Minimum 0</small>
                        </div>
                    </div>

                    <!-- Description -->
                    <div class="mb-3">
                        <label for="description" class="form-label">Description</label>
                        <textarea class="form-control" id="description" th:field="*{description}"
                                  th:classappend="${#fields.hasErrors('description')} ? 'is-invalid' : ''"
                                  rows="4" maxlength="500"></textarea>
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
                        <small class="text-muted">Maximum 500 caract√®res</small>
                    </div>

                    <!-- Affichage des erreurs globales -->
                    <div th:if="${#fields.hasGlobalErrors()}" class="alert alert-danger">
                        <ul class="mb-0">
                            <li th:each="err : ${#fields.globalErrors()}" th:text="${err}"></li>
                        </ul>
                    </div>

                    <hr>

                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-check-circle"></i> Enregistrer
                        </button>
                        <a th:href="@{/}" class="btn btn-secondary">
                            <i class="bi bi-x-circle"></i> Annuler
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
